{{ define "jsInclude"}}
<!-- Load c3.css -->
<link href="static/c3/c3.css" rel="stylesheet" type="text/css">

<!-- Load d3.js and c3.js -->
<script type="text/javascript" src="static/d3/d3.min.js" charset="utf-8"></script>
<script type="text/javascript" src="static/c3/c3.min.js"></script>
{{ end }}

{{ define "content" }}
<div id="chart"></div>


<script type="text/javascript">
	var chart = c3.generate({
		bindto: '#chart',
		data:{
			x: 'b',
			json:{
				'a':[42,43,44],
				'b':['2015-01-06T00:00:01Z', '2016-04-08T00:00:01Z', '2017-01-05T00:00:01Z']
		},
			xFormat: '%Y-%m-%dT%H:%M:%SZ',
		},
		zoom: {
			enabled: true
		},
		axis: {
			x:{
				type: 'timeseries',
				tick: {
                	format: '%Y-%m-%d'
            	}
			}
		}
	});

	function loadInstrument(id){
		chart.load({
			url: '/timeseries?instrument=' + id +'&limit=365',
			mimeType: 'json',

			keys: {
				x: 'Time',
				value: ['Close'],
			},
			names: {
			    'Close': 'Data Name 1'
			}
		})

		setTimeout(function() {
			console.log(chart.data.shown());
			chart.unload("Close")

			console.log(chart.data.names());
		}, 2000);
	};

	loadInstrument('INDEX_GDAXI');

//	var table = d3.select('body').append('table');


</script>
{{ end }}
